{"ast":null,"code":"import _asyncToGenerator from \"/Users/klaushougesen/_repos/consulting/lahi/github/duet-example-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*!\n * Built with Duet Design System\n */\nimport { r as registerInstance, c as createEvent, h, g as getElement, H as Host } from './index-eb374972.js';\nimport { c as createID } from './create-id-981107da.js';\nimport { i as isKeyboardClick } from './keyboard-utils-584cedd7.js';\nimport { i as inheritGlobalTheme } from './themeable-component-572685dd.js';\nvar actionEdit2 = {\n  \"title\": \"action-edit-2\",\n  \"tags\": \"action edit 2 pen pencil\",\n  \"svg\": \"<svg fill=\\\"currentColor\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" role=\\\"img\\\"><path d=\\\"M.748 24a.755.755 0 0 1-.531-.22.754.754 0 0 1-.196-.716l1.77-6.905a.84.84 0 0 1 .045-.121.73.73 0 0 1 .151-.223L16.513 1.289A4.355 4.355 0 0 1 19.611 0c1.178 0 2.277.454 3.106 1.279l.029.029a4.367 4.367 0 0 1 1.251 3.121 4.356 4.356 0 0 1-1.32 3.087L8.183 22.01a.735.735 0 0 1-.231.154.784.784 0 0 1-.111.042L.933 23.978A.773.773 0 0 1 .748 24zm1.041-1.791 4.41-1.131-3.281-3.275zm5.868-1.795 13.02-13.02-4.074-4.074L3.58 16.344zM21.736 6.332a2.893 2.893 0 0 0-.059-3.972l-.02-.02a2.872 2.872 0 0 0-2.037-.84v-.375l-.001.375a2.873 2.873 0 0 0-1.954.762z\\\"/></svg>\"\n};\nconst duetStepCss = \"*.sc-duet-step,*.sc-duet-step::after,*.sc-duet-step::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.sc-duet-step-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;display:block}.duet-step.sc-duet-step{padding:20px !important;font-family:\\\"localtapiola-sans\\\", -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\";font-size:1rem;font-weight:600;background:white;box-shadow:0 2px 6px 0 rgba(0, 41, 77, 0.07), 0 -1px 0 0 rgba(0, 0, 0, 0.09), -1px 0 0 0 rgba(0, 0, 0, 0.07), 1px 0 0 0 rgba(0, 0, 0, 0.07), 0 1px 0 0 rgba(0, 0, 0, 0.07)}.duet-step.duet-theme-turva.sc-duet-step{font-family:\\\"turva-sans\\\", -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\";box-shadow:0 2px 6px 0 rgba(117, 117, 117, 0.13), 0 -1px 0 0 rgba(0, 0, 0, 0.09), -1px 0 0 0 rgba(0, 0, 0, 0.07), 1px 0 0 0 rgba(0, 0, 0, 0.07), 0 1px 0 0 rgba(0, 0, 0, 0.07)}.duet-step.rounded-top.sc-duet-step{border-top-left-radius:4px;border-top-right-radius:4px}.duet-step.rounded-bottom.sc-duet-step{margin-bottom:20px !important;border-bottom-right-radius:4px;border-bottom-left-radius:4px}@media (min-width: 36em){.duet-step.rounded-bottom.sc-duet-step{margin-bottom:0 !important}}@media (min-width: 36em){.duet-step.sc-duet-step{padding:0 20px 0 0 !important;margin:0 !important;font-size:1.25rem;box-shadow:none !important}}.duet-step-heading.sc-duet-step{display:flex;align-items:center;border-radius:4px}.duet-step-heading[aria-disabled=false].sc-duet-step{cursor:pointer}.duet-step-heading.sc-duet-step:focus{outline:0}.duet-step-heading.sc-duet-step:active{opacity:0.75}.user-is-tabbing.sc-duet-step-h .duet-step-heading.sc-duet-step:focus{box-shadow:0 0 0 4px rgba(0, 119, 179, 0.3), 0 0 0 1px #0077b3}.user-is-tabbing.sc-duet-step-h .duet-theme-turva.sc-duet-step .duet-step-heading.sc-duet-step:focus{box-shadow:0 0 0 4px rgba(23, 28, 58, 0.2), 0 0 0 1px #171c3a}.is-complete.sc-duet-step .duet-step-heading.sc-duet-step:hover .duet-step-counter.sc-duet-step,.is-disabled.sc-duet-step .duet-step-heading.sc-duet-step:hover .duet-step-counter.sc-duet-step{background-color:#005f8f}.duet-theme-turva.is-complete.sc-duet-step .duet-step-heading.sc-duet-step:hover .duet-step-counter.sc-duet-step,.duet-theme-turva.is-disabled.sc-duet-step .duet-step-heading.sc-duet-step:hover .duet-step-counter.sc-duet-step{background-color:#9e0a26}.is-current.sc-duet-step .duet-step-heading.sc-duet-step{margin-bottom:20px}@media (min-width: 36em){.duet-step-heading.sc-duet-step{margin-top:8px;margin-bottom:8px !important}.sc-duet-step-h:first-of-type .duet-step-heading.sc-duet-step{margin-top:0}.sc-duet-step-h:last-of-type .duet-step-heading.sc-duet-step{margin-bottom:0 !important}}.duet-step-counter.sc-duet-step{-webkit-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center;width:30px;height:30px;line-height:30px;color:white;text-align:center;border-radius:50%;transition:background-color 300ms ease}@media (min-width: 36em){.duet-step-counter.sc-duet-step{width:40px;height:40px;line-height:40px}}.is-complete.sc-duet-step .duet-step-counter.sc-duet-step,.is-current.sc-duet-step .duet-step-counter.sc-duet-step,.is-disabled.sc-duet-step .duet-step-counter.sc-duet-step{background-color:#0077b3}.duet-theme-turva.is-complete.sc-duet-step .duet-step-counter.sc-duet-step,.duet-theme-turva.is-current.sc-duet-step .duet-step-counter.sc-duet-step,.duet-theme-turva.is-disabled.sc-duet-step .duet-step-counter.sc-duet-step{background-color:#c60c30}.is-incomplete.sc-duet-step .duet-step-counter.sc-duet-step{background-color:#657787}.duet-theme-turva.is-incomplete.sc-duet-step .duet-step-counter.sc-duet-step{background-color:#747475}.duet-step-icon.sc-duet-step{display:flex;align-items:center;justify-content:center;width:16px;height:16px}@media (min-width: 36em){.duet-step-icon.sc-duet-step{width:20px;height:20px}}.duet-step-icon.sc-duet-step duet-icon.sc-duet-step{width:16px;height:16px}@media (min-width: 36em){.duet-step-icon.sc-duet-step duet-icon.sc-duet-step{width:20px;height:20px}}@media (min-width: 36em){.duet-step-content-wrapper.sc-duet-step{min-height:20px;padding-left:40px;margin-left:19px;border-left:2px solid #e1e3e6}.duet-theme-turva.sc-duet-step .duet-step-content-wrapper.sc-duet-step{border-color:#e4e4e6}.sc-duet-step-h:last-of-type .duet-step-content-wrapper.sc-duet-step{min-height:0;border:transparent}}.duet-step-content.sc-duet-step{display:none;padding-bottom:16px}@media (min-width: 36em){.duet-step-content.sc-duet-step{padding-bottom:28px}}.is-current.sc-duet-step .duet-step-content.sc-duet-step{display:block}.duet-step-heading-slot.sc-duet-step{display:none;margin-top:2px}@media (min-width: 48em){.duet-step-heading-slot.sc-duet-step{display:block}}\";\nlet DuetStep = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.duetStepClick = createEvent(this, \"duetStepClick\", 7);\n    this.buttonId = createID(\"DuetStepButton\");\n    this.contentId = createID(\"DuetStepContent\");\n    /**\n     * Theme of the component.\n     */\n\n    this.theme = \"\";\n    /**\n     * @internal\n     * Enable/disable rounded top corners (on mobile).\n     * This property is used internally by stepper, and should not be set by the developer.\n     */\n\n    this.roundedTop = false;\n    /**\n     * @internal\n     * Enable/disable rounded bottom corners (on mobile).\n     * This property is used internally by stepper, and should not be set by the developer.\n     */\n\n    this.roundedBottom = false;\n\n    this.handleKeyDown = e => {\n      if (this.isClickDisabled()) {\n        return;\n      }\n\n      if (isKeyboardClick(e)) {\n        e.preventDefault();\n        this.handleStepClick(e);\n      }\n    };\n\n    this.handleClick = e => {\n      if (this.isClickDisabled()) {\n        return;\n      }\n\n      this.handleStepClick(e);\n    };\n  }\n\n  handleStepClick(e) {\n    this.duetStepClick.emit({\n      originalEvent: e,\n      component: \"duet-step\",\n      stepIndex: this.stepIndex\n    });\n  }\n\n  componentWillLoad() {\n    inheritGlobalTheme(this);\n  }\n  /**\n   * Programmatically shift focus to the step's heading.\n   */\n\n\n  setFocus(options = {\n    preventScroll: true\n  }) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.buttonElement.focus(options);\n    })();\n  }\n\n  isClickDisabled() {\n    return this.state !== \"complete\";\n  }\n\n  headingColor() {\n    if (this.state !== \"incomplete\") {\n      return \"\";\n    }\n\n    if (this.theme !== \"turva\") {\n      return \"gray-darker\";\n    } else {\n      return \"gray-dark-turva\";\n    }\n  }\n\n  renderStepCounter() {\n    if (this.state === \"complete\" || this.state === \"disabled\") {\n      return h(\"div\", {\n        class: \"duet-step-icon\"\n      }, h(\"duet-icon\", {\n        margin: \"none\",\n        size: \"auto\",\n        color: \"gray-lightest\",\n        icon: actionEdit2.svg\n      }));\n    }\n\n    return `${this.stepIndex + 1} `;\n  }\n  /**\n   * render() function\n   * Always the last one in the class.\n   */\n\n\n  render() {\n    {\n      return h(\"div\", {\n        class: {\n          \"duet-step\": true,\n          [`is-${this.state}`]: true,\n          \"rounded-top\": this.roundedTop,\n          \"rounded-bottom\": this.roundedBottom,\n          \"duet-theme-turva\": this.theme === \"turva\"\n        }\n      }, h(\"div\", {\n        class: \"duet-step-heading\",\n        id: this.buttonId,\n        role: \"button\",\n        tabindex: this.state !== \"incomplete\" ? \"0\" : undefined,\n        \"aria-disabled\": this.isClickDisabled().toString(),\n        \"aria-expanded\": (this.state === \"current\").toString(),\n        \"aria-controls\": this.contentId,\n        onClick: this.handleClick,\n        onKeyDown: this.handleKeyDown,\n        ref: element => this.buttonElement = element\n      }, h(\"div\", {\n        \"aria-hidden\": \"true\"\n      }, h(\"div\", {\n        class: \"duet-step-counter\"\n      }, this.renderStepCounter())), h(\"duet-spacer\", {\n        direction: \"horizontal\",\n        size: \"large\",\n        breakpoint: \"small\"\n      }), h(\"duet-spacer\", {\n        direction: \"horizontal\",\n        size: \"medium\",\n        breakpoint: \"x-small\"\n      }), h(\"div\", null, h(\"duet-heading\", {\n        theme: this.theme,\n        level: this.headingLevel,\n        visualLevel: \"h4\",\n        color: this.headingColor(),\n        margin: \"none\"\n      }, this.heading)), h(\"duet-spacer\", {\n        direction: \"horizontal\",\n        size: \"large\"\n      }), h(\"div\", {\n        class: \"duet-step-heading-slot\"\n      }, h(\"slot\", {\n        name: \"heading-content\"\n      }))), h(\"div\", {\n        class: \"duet-step-content-wrapper\"\n      }, h(\"div\", {\n        class: \"duet-step-content\",\n        role: \"region\",\n        \"aria-labelledby\": this.buttonId,\n        id: this.contentId\n      }, h(\"slot\", null))));\n    }\n  }\n\n  get element() {\n    return getElement(this);\n  }\n\n};\nDuetStep.style = duetStepCss;\n\nfunction groupBy(prop, items) {\n  const result = {};\n  items.forEach(item => {\n    const value = item[prop];\n\n    if (!result[value]) {\n      result[value] = [];\n    }\n\n    result[value].push(item);\n  });\n  return result;\n}\n\nconst duetStepperCss = \":host{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;margin-bottom:20px !important;display:block;width:100%}:host(.duet-m-0){margin:0 !important}.duet-stepper{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}@media (min-width: 36em){.duet-stepper{padding:28px !important;padding-top:36px !important;padding-bottom:36px !important;background:white;border-radius:4px;box-shadow:0 2px 6px 0 rgba(0, 41, 77, 0.07), 0 -1px 0 0 rgba(0, 0, 0, 0.09), -1px 0 0 0 rgba(0, 0, 0, 0.07), 1px 0 0 0 rgba(0, 0, 0, 0.07), 0 1px 0 0 rgba(0, 0, 0, 0.07)}}\";\nlet DuetStepper = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.duetStepChange = createEvent(this, \"duetStepChange\", 7);\n    /**\n     * Theme of the component.\n     */\n\n    this.theme = \"\";\n    /**\n     * Format of message used to announce current step when navigating between steps.\n     * The string {current} is replaced with current the step number.\n     * The string {total} is replaced with the total number of steps.\n     */\n\n    this.accessibleLive = \"Lista jossa {total} kohtaa. Olet kohdassa {current}.\";\n    /**\n     * Controls the margin of the component.\n     */\n\n    this.margin = \"auto\";\n    /**\n     * Controls whether navigation back to previous steps is allowed or not.\n     */\n\n    this.backDisabled = false;\n    /**\n     * The index of the current step.\n     */\n\n    this.selected = 0;\n  }\n\n  currentStepChanged(nextStep) {\n    if (isNaN(nextStep)) {\n      throw new Error(`step must be a number. got: ${nextStep}`);\n    }\n\n    if (nextStep < 0) {\n      throw new Error(`step must be not be less than zero. got: ${nextStep}`);\n    }\n\n    if (nextStep > this.getSteps().length) {\n      throw new Error(`step must not exceed total number of steps`);\n    }\n\n    this.updateStepState(); // Shifting focus would occasionally fail if done immediately.\n    // This may be due to re-render happening at the same time.\n    // So we defer shifting focus, to ensure it always works.\n\n    setTimeout(() => this.setStepFocus(), 50);\n  }\n\n  currentStepInvokedDisable() {\n    this.updateStepState();\n  }\n\n  onDuetStepClick(e) {\n    this.duetStepChange.emit({\n      fromStep: this.selected,\n      toStep: e.detail.stepIndex,\n      component: \"duet-stepper\"\n    });\n  }\n\n  componentWillLoad() {\n    inheritGlobalTheme(this);\n  }\n\n  connectedCallback() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.updateStepState();\n    })();\n  }\n\n  getSteps() {\n    return Array.from(this.element.querySelectorAll(\"duet-step\"));\n  }\n\n  setStepFocus() {\n    const steps = this.getSteps();\n    const step = steps[this.selected];\n    step.setFocus();\n  }\n\n  updateStepState() {\n    const steps = this.getSteps();\n    steps.forEach((step, index) => {\n      let state;\n\n      if (index < this.selected) {\n        state = this.backDisabled ? \"disabled\" : \"complete\";\n      } else if (index > this.selected) {\n        state = \"incomplete\";\n      } else {\n        state = \"current\";\n      }\n\n      step.theme = this.theme;\n      step.state = state;\n      step.stepIndex = index;\n    });\n    const stepsByState = groupBy(\"state\", steps);\n    Object.values(stepsByState).forEach(steps => {\n      steps.forEach((step, i) => {\n        step.roundedTop = i === 0;\n        step.roundedBottom = i === steps.length - 1;\n      });\n    });\n  }\n\n  formatAnnouncement() {\n    const steps = this.getSteps();\n    const current = (this.selected + 1).toString(10);\n    const total = steps.length.toString(10);\n    return this.accessibleLive.replace(\"{current}\", current).replace(\"{total}\", total);\n  }\n  /**\n   * render() function\n   * Always the last one in the class.\n   */\n\n\n  render() {\n    return h(Host, {\n      class: {\n        \"duet-m-0\": this.margin === \"none\"\n      }\n    }, h(\"div\", {\n      class: {\n        \"duet-stepper\": true,\n        \"duet-theme-turva\": this.theme === \"turva\"\n      }\n    }, h(\"duet-visually-hidden\", {\n      \"aria-live\": \"polite\",\n      \"aria-atomic\": \"true\",\n      \"aria-relevant\": \"all\"\n    }, this.formatAnnouncement()), h(\"slot\", null)));\n  }\n\n  get element() {\n    return getElement(this);\n  }\n\n  static get watchers() {\n    return {\n      \"selected\": [\"currentStepChanged\"],\n      \"backDisabled\": [\"currentStepInvokedDisable\"]\n    };\n  }\n\n};\nDuetStepper.style = duetStepperCss;\nexport { DuetStep as duet_step, DuetStepper as duet_stepper };","map":null,"metadata":{},"sourceType":"module"}